import { useRef, useState } from "react";
import { Meta, Story, Canvas, Description } from "@storybook/blocks";
import * as IcSelectSingleStories from './ic-select-single.stories';

import { IcSelect } from "../components";
import readme from "../../../web-components/src/components/ic-select/readme.md";
import {SlottedSVG} from "../react-component-lib/slottedSVG";

<Meta of={IcSelectSingleStories} />

<Description markdown={readme} />

export const defaultArgs = {
  disabled: false,
  fullWidth: false,
  helperText: "Select one option from the list",
  hideLabel: false,
  loading: false,
  loadingLabel: "Loading...",
  label: "What is your favourite coffee?",
  placeholder: "Select an option",
  readonly: false,
  required: false,
  size: "default",
  validationStatus: "",
  validationText: "",
  showClearButton: false,
};

export const options = [
  { label: "Cappuccino", value: "Cap" },
  { label: "Latte", value: "Lat" },
  { label: "Americano", value: "Ame" },
];

export const optionsWithCustomElements = [
  {
    label: "Cappuccino",
    value: "Cap",
  },
  {
    label: "Latte",
    value: "Lat",
    element: {
      component: `<ic-status-tag label="Neutral status"></ic-status-tag>`,
      ariaLabel: "Neutral status tag",
    },
  },
  {
    label: "Americano",
    value: "Ame",
    icon: `<svg aria-labelledby="warning-title" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000"><g id="warning"><path id="Vector" d="M4.47 20.5037H19.53C21.07 20.5037 22.03 18.8337 21.26 17.5037L13.73 4.49375C12.96 3.16375 11.04 3.16375 10.27 4.49375L2.74 17.5037C1.97 18.8337 2.93 20.5037 4.47 20.5037ZM12 13.5037C11.45 13.5037 11 13.0537 11 12.5037V10.5037C11 9.95375 11.45 9.50375 12 9.50375C12.55 9.50375 13 9.95375 13 10.5037V12.5037C13 13.0537 12.55 13.5037 12 13.5037ZM13 17.5037H11V15.5037H13V17.5037Z" /></g></svg>`,
  },
];

export const optionsWithDisabled = [
  { label: "Cappuccino", value: "Cap" },
  { label: "Latte", value: "Lat", disabled: true },
  { label: "Americano", value: "Ame" },
];

export const optionsWithDescriptions = [
  {
    label: "Cappuccino",
    value: "Cap",
    description: "Coffee frothed up with pressurised steam",
  },
  {
    label: "Latte",
    value: "Lat",
    description: "A milkier coffee than a cappuccino",
  },
  {
    label: "Americano",
    value: "Ame",
    description: "Espresso coffee diluted with hot water",
  },
];

export const groupedOptions = [
  {
    label: "Fancy",
    children: [
      { label: "Cappuccino", value: "Cap" },
      { label: "Flat white", value: "Flat" },
    ],
  },
  {
    label: "Boring",
    children: [
      { label: "Filter", value: "Fil" },
      { label: "Latte", value: "Lat" },
    ],
  },
];

export const optionsWithRecommended = [
  { label: "Cappuccino", value: "Cappuccino" },
  { label: "Flat white", value: "Flat white", recommended: true },
  { label: "Latte", value: "Latte" },
  { label: "Americano", value: "Americano", recommended: true },
  { label: "Filter", value: "Fil" },
];

export const manyOptions = [
  { label: "Cappuccino", value: "Cap" },
  { label: "Latte", value: "Lat" },
  { label: "Americano", value: "Ame" },
  { label: "Filter", value: "Fil" },
  { label: "Flat white", value: "Fla" },
  { label: "Mocha", value: "Moc" },
  { label: "Macchiato", value: "Mac" },
  { label: "Caf√© au lait", value: "Caf" },
  { label: "Espresso", value: "Esp" },
  { label: "Cortado", value: "Cor" },
  { label: "Ristretto", value: "Ris" },
  { label: "Latte macchiato", value: "Lam" },
];

export const playgroundOptions = [
  {
    label: "Cappuccino",
    value: "Cap",
    description: "Coffee frothed up with pressurised steam",
  },
  {
    label: "Boring",
    children: [
      {
        label: "Latte",
        value: "Lat",
        description: "A milkier coffee than a cappuccino",
      },
      {
        label: "Filter",
        value: "Fil",
        description: "Coffee filtered using paper or a mesh",
      },
    ],
  },
  {
    label: "Fancy",
    children: [
      {
        label: "Flat white",
        value: "Fla",
        description:
          "Coffee without froth made with espresso and hot steamed milk",
      },
      {
        label: "Macchiato",
        value: "Mac",
        description: "Espresso coffee with a dash of frothy steamed milk",
      },
    ],
  },
  {
    label: "Americano",
    value: "Ame",
    description: "Espresso coffee diluted with hot water",
  },
  {
    label: "Mocha",
    value: "Moc",
    description: "A mixture of coffee and chocolate",
  },
];

### Default

<Canvas>
  <Story of={IcSelectSingleStories.Default} />
</Canvas>

### Default value

<Canvas>
  <Story of={IcSelectSingleStories.DefaultValue} />
</Canvas>

### With clear button

<Canvas>
  <Story of={IcSelectSingleStories.WithClearButton} />
</Canvas>

### With descriptions

<Canvas>
  <Story of={IcSelectSingleStories.WithDescriptions} />
</Canvas>

### Helper text

<Canvas>
  <Story of={IcSelectSingleStories.HelperText} />
</Canvas>

### Custom placeholder

<Canvas>
  <Story of={IcSelectSingleStories.CustomPlaceholder} />
</Canvas>

### Custom elements

<Canvas>
  <Story of={IcSelectSingleStories.CustomElements} />
</Canvas>

### Sizes

<Canvas>
  <Story of={IcSelectSingleStories.Sizes} />
</Canvas>

### Disabled

<Canvas>
  <Story of={IcSelectSingleStories.Disabled} />
</Canvas>

### Disabled options

<Canvas>
  <Story of={IcSelectSingleStories.DisabledOptions} />
</Canvas>

### Full width

<Canvas>
  <Story of={IcSelectSingleStories.FullWidth} />
</Canvas>

### Hidden label

<Canvas>
  <Story of={IcSelectSingleStories.HiddenLabel} />
</Canvas>

### Required

<Canvas>
  <Story of={IcSelectSingleStories.Required} />
</Canvas>

### Read-only

<Canvas>
  <Story of={IcSelectSingleStories.ReadOnly} />
</Canvas>

### Groups

<Canvas>
  <Story of={IcSelectSingleStories.Groups} />
</Canvas>

### Recommended

<Canvas>
  <Story of={IcSelectSingleStories.Recommended} />
</Canvas>

### Validation

<Canvas>
  <Story of={IcSelectSingleStories.Validation} />
</Canvas>

### Scroll behaviour

<Canvas>
  <Story of={IcSelectSingleStories.ScrollBehaviour} />
</Canvas>

### Loading with error

export const LoadingWithError = () => {
  const selectEl = useRef();
  return (
    <IcSelect
      ref={selectEl}
      label="What are your favourite types of coffee?"
      options={options}
      loading
      timeout="1000"
      onIcChange={(event) => console.log(`icChange: ${event.detail.value}`)}
      onIcRetryLoad={(event) => (selectEl.current.loading = true)}
    />
  );
};

<Canvas>
  <Story of={IcSelectSingleStories.LoadingWithError_} />
</Canvas>

### Emitting icOptionSelect on enter

<Canvas>
  <Story of={IcSelectSingleStories.EmittingIcOptionSelectOnEnter} />
</Canvas>

### Controlled

export const ControlledExample = () => {
  const [value, setValue] = useState("Cap");
  const handleChange = (event) => {
    console.log(event.detail.value);
    setValue(event.detail.value);
  };
  return (
    <IcSelect
      placeholder="Controlled"
      label="Controlled"
      options={options}
      value={value}
      onIcChange={handleChange}
    />
  );
};

<Canvas>
  <Story of={IcSelectSingleStories.Controlled} />
</Canvas>

### Uncontrolled

export const Uncontrolled = () => {
  const selectEl = useRef();
  const handleChange = () => {
    console.log(selectEl.current.value);
  };
  return (
    <>
      <IcSelect
        ref={selectEl}
        placeholder="Uncontrolled"
        label="Uncontrolled"
        options={options}
        onIcChange={handleChange}
      />
    </>
  );
};

<Canvas>
  <Story of={IcSelectSingleStories.Uncontrolled_} />
</Canvas>

### Playground

<Canvas>
  <Story of={IcSelectSingleStories.Playground} />
</Canvas>
