import {
  Meta,
  Story,
  Canvas,
  Controls,
  Description,
} from "@storybook/blocks";
import { useRef } from "react";
import { IcButton, IcPopoverMenu, IcMenuItem, IcBadge } from "../components";
import readme from "../../../web-components/src/components/ic-button/readme.md";
import { SlottedSVG } from "../react-component-lib/slottedSVG";
import  { iconProps } from "../component-tests/IcButton/IcButtonTestData"
import { mdiAccountGroup } from "@mdi/js";
import * as IcButtonStories from './ic-button.stories';

<Meta of={IcButtonStories} />

<Description markdown={readme} />

export const defaultArgs = {
  message: "Custom Button",
  disabled: false,
  loading: false,
  appearance: "default",
  size: "default",
  variant: "secondary",
  fullWidth: false,
  hasIcon: true,
  hasBadge: false,
};

### Primary

<Canvas>
  <Story of={IcButtonStories.Primary} />
</Canvas>

### Router

<Canvas>
  <Story of={IcButtonStories.Router} />
</Canvas>

### Secondary

<Canvas>
  <Story of={IcButtonStories.Secondary} />
</Canvas>

### Tertiary

<Canvas>
  <Story of={IcButtonStories.Tertiary} />
</Canvas>

### Destructive

<Canvas>
  <Story of={IcButtonStories.Destructive} />
</Canvas>

### With icon

<Canvas>
  <Story of={IcButtonStories.WithIcon} />
</Canvas>

### Dropdown

<Canvas>
  <Story of={IcButtonStories.Dropdown} />
</Canvas>

### Dropdown example

export const PopoverDropdown = () => {
  const buttonEl = useRef();
  const popoverEl = useRef();
  const handleClick = () => {
    popoverEl.current.open = buttonEl.current.dropdownExpanded;
  };
  const handleClose = () => {
    buttonEl.current.dropdownExpanded = popoverEl.current.open;
  };
  return (
    <div>
      <IcButton
        id="popover-button"
        dropdown
        variant="primary"
        onClick={() => handleClick()}
        ref={buttonEl}
      >
        Button
      </IcButton>
      <IcPopoverMenu
        anchor="popover-button"
        ariaLabel="popover"
        onIcPopoverClosed={() => handleClose()}
        ref={popoverEl}
      >
        <IcMenuItem label="Copy code"></IcMenuItem>
        <IcMenuItem label="Paste code"></IcMenuItem>
        <IcMenuItem label="Actions"></IcMenuItem>
      </IcPopoverMenu>
    </div>
  );
};

<Canvas>
  <Story of={IcButtonStories.DropdownExample} />
</Canvas>

### Size

<Canvas>
  <Story of={IcButtonStories.Size} />
</Canvas>

### With mdi icons

<Canvas>
  <Story of={IcButtonStories.WithMdiIcons} />
</Canvas>

### Full width

<Canvas>
  <Story of={IcButtonStories.FullWidth} />
</Canvas>

### Icon only

<Canvas>
  <Story of={IcButtonStories.IconOnly} />
</Canvas>

### Icon variants

export const IconBtnGroup = (iconProps) => {
  return (
    <>
      <h1>{iconProps.title}</h1>
      <div style={{
          backgroundColor: iconProps.appearance === "light"  ? "#2c2f34" : "#fff",
          display: "flex",
          gap: "0.5rem",
          marginBottom: "1rem",
          width: "fit-content",
          padding: iconProps.appearance === "light"  ? "6px 10px" : "none",
        }} >
        <IcButton variant="icon-primary" size={iconProps.size} appearance={iconProps.appearance} loading={iconProps.loading} disabled={iconProps.disabled} aria-label="refresh" id="testButton" >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 0 24 24"
            width="24px"
            fill="#000000"
          >
            <path d="M0 0h24v24H0V0z" fill="none" />
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
          </svg>
        </IcButton>
        <IcButton variant="icon-secondary" size={iconProps.size} appearance={iconProps.appearance} loading={iconProps.loading} disabled={iconProps.disabled} aria-label="refresh" id="testButton" >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 0 24 24"
            width="24px"
            fill="#000000"
          >
            <path d="M0 0h24v24H0V0z" fill="none" />
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
          </svg>
        </IcButton>
        <IcButton variant="icon-tertiary" size={iconProps.size} appearance={iconProps.appearance} loading={iconProps.loading} disabled={iconProps.disabled} aria-label="refresh" id="testButton" >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 0 24 24"
            width="24px"
            fill="#000000"
          >
            <path d="M0 0h24v24H0V0z" fill="none" />
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
          </svg>
        </IcButton>
        <IcButton variant="icon-destructive" size={iconProps.size} appearance={iconProps.appearance} loading={iconProps.loading} disabled={iconProps.disabled} aria-label="refresh" id="testButton" >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 0 24 24"
            width="24px"
            fill="#000000"
          >
            <path d="M0 0h24v24H0V0z" fill="none" />
            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
          </svg>
        </IcButton>
      </div>
    </>
  )
}

<Canvas>
  <Story of={IcButtonStories.IconVariants} />
</Canvas>

### Playground

<Canvas>
  <Story of={IcButtonStories.Playground} />
</Canvas>

### Playground with icon

<Canvas>
  <Story of={IcButtonStories.PlaygroundWithIcon} />
</Canvas>

### File Upload

export const FileUpload = () => {
  function updateFileList(fileArray) {
    const fileList = [];
    Array.from(fileArray).forEach((file) => {
      fileList.push(file.name);
    });
    return fileList.join(", ");
  }

return (

<div>
  <IcButton
    variant="primary"
    fileUpload="true"
    accept=".doc, text/plain, .json"
    onClick={(event) =>
      document.addEventListener("icFileSelection", (event) =>
        alert(`Files Selected: ${updateFileList(event.detail)}`)
      )
    }
  >
    Upload File
  </IcButton>
</div>
); };

<Canvas>
  <Story of={IcButtonStories.FileUpload_} />
</Canvas>
