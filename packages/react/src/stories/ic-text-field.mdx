import { useState, useRef } from "react";
import {
  Meta,
  Story,
  Canvas,
  Controls,
  Description,
} from "@storybook/blocks";
import { IcTextField, IcButton } from "../components";
import {SlottedSVG} from "../react-component-lib/slottedSVG";
import readme from "../../../web-components/src/components/ic-text-field/readme.md";
import * as IcTextFieldStories from './ic-text-field.stories';

<Meta of={IcTextFieldStories} />

<Description markdown={readme} />

export const SlottedIcon = () => (
  <SlottedSVG 
    slot="icon"
    xmlns="http://www.w3.org/2000/svg"
    height="24px"
    viewBox="0 0 24 24"
    width="24px"
    fill="#000000"
  >
    <path d="M0 0h24v24H0z" fill="none" />
    <path d="M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z" />
  </SlottedSVG>  
);

export const ControlledExample = () => {
  const [value, setValue] = useState("");
  const handleChange = (event) => {
    console.log(event.detail.value);
    setValue(event.detail.value);
  };
  return (
    <IcTextField
      placeholder="Controlled"
      label="Controlled"
      value={value}
      onIcChange={handleChange}
    />
  );
};

### Default

<Canvas>
  <Story of={IcTextFieldStories.Default} />
</Canvas>

### Placeholder and required

<Canvas>
  <Story of={IcTextFieldStories.PlaceholderAndRequired} />
</Canvas>

### Helper text

<Canvas>
  <Story of={IcTextFieldStories.HelperText} />
</Canvas>

### With icon

<Canvas>
  <Story of={IcTextFieldStories.WithIcon} />
</Canvas>

### With value

<Canvas>
  <Story of={IcTextFieldStories.WithValue} />
</Canvas>

### With null value

<Canvas>
  <Story of={IcTextFieldStories.WithNullValue} />
</Canvas>

### With undefined value

<Canvas>
  <Story of={IcTextFieldStories.WithUndefinedValue} />
</Canvas>

### Max length

<Canvas>
  <Story of={IcTextFieldStories.MaxLength} />
</Canvas>

### Max length message

<Canvas>
  <Story of={IcTextFieldStories.MaxLengthMessage} />
</Canvas>

### Full width

<Canvas>
  <Story of={IcTextFieldStories.FullWidth} />
</Canvas>

### Disabled

<Canvas>
  <Story of={IcTextFieldStories.Disabled} />
</Canvas>

### Read only

<Canvas>
  <Story of={IcTextFieldStories.ReadOnly} />
</Canvas>

### Validation

<Canvas>
  <Story of={IcTextFieldStories.Validation} />
</Canvas>

### Text area with resize

<Canvas>
  <Story of={IcTextFieldStories.TextAreaWithResize} />
</Canvas>

### Controlled

```
export const ControlledExample = () => {
  const [value, setValue] = useState("");
  const handleChange = (event) => {
    console.log(event.detail.value);
    setValue(event.detail.value);
  }
  return (
    <IcTextField placeholder="Controlled" label="Controlled" value={value} onIcChange={handleChange} />
  );
};
```

<Canvas>
  <Story of={IcTextFieldStories.Controlled} />
</Canvas>

### Uncontrolled

export const Uncontrolled = () => {
  const textFieldEl = useRef();
  const handleChange = () => {
    console.log(textFieldEl.current.value);
  };
  return (
    <IcTextField
      ref={textFieldEl}
      placeholder="Uncontrolled"
      label="Uncontrolled"
      onIcChange={handleChange}
    />
  );
};

<Canvas>
  <Story of={IcTextFieldStories.Uncontrolled_} />
</Canvas>

### Min and max

<Canvas>
  <Story of={IcTextFieldStories.MinAndMax} />
</Canvas>

### Maximum and minimum characters

<Canvas>
  <Story of={IcTextFieldStories.MaximumAndMinimumCharacters} />
</Canvas>

### Hidden input

export const HiddenInput = () => {
  const [renderHidden, setRenderHidden] = useState(true);
  const handleChange = () => {
    setRenderHidden(!renderHidden);
  };
  return (
    <>
      <IcTextField label="my label" hiddenInput={renderHidden} />
      <IcButton onClick={() => handleChange()}>Toggle hidden input</IcButton>
    </>
  );
};

<Canvas>
  <Story of={IcTextFieldStories.HiddenInput_} />
</Canvas>

### Playground

export const defaultArgs = {
  disabled: false,
  fullWidth: false,
  helperText: "",
  hideLabel: false,
  inputId: "ic-text-field-input-0",
  inputmode: "text",
  label: "Text Field",
  maxCharacters: 0,
  maxLength: 0,
  maxLengthMessage: "Too many characters",
  minCharacters: 0,
  name: "0",
  placeholder: "",
  readonly: false,
  required: false,
  resize: false,
  rows: 1,
  size: "default",
  spellcheck: false,
  type: "text",
  validationInline: false,
  validationStatus: "none",
  validationText: "",
  debounce: 0
};

<Canvas>
  <Story of={IcTextFieldStories.Playground} />
</Canvas>
