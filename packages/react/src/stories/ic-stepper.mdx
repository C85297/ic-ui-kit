import {
  Meta,
  Story,
  Canvas,
  Controls,
  Description,
} from "@storybook/blocks";
import * as IcStepperStories from './ic-stepper.stories';

import { IcStep, IcStepper, IcButton } from "../components";

import readme from "../../../web-components/src/components/ic-stepper/readme.md";
import stepReadme from "../../../web-components/src/components/ic-step/readme.md";

<Meta of={IcStepperStories} />

<Description markdown={readme} />

<Description markdown={stepReadme} />

export const defaultArgs = {
  aligned: "full-width",
  connectorWidth: 100,
  appearance: "default",
  variant: "default",
  hideStepInfo: false,
  stepTitle: "Editable step",
  stepType: "current",
  stepStatus: "optional",
  stepSubtitle: "Optional subtitle",
};

export const CompactButtons = () => (
    <div>
      <IcButton
        class="back-btn-compact-stepper"
        style={{ marginRight: "var(--ic-space-lg)" }}
        onClick={() => {
          const backBtn = document.querySelector(".back-btn-compact-stepper");
          const nextBtn = document.querySelector(".next-btn-compact-stepper");
          const steps = document.querySelectorAll(
            "#standard-compact-stepper > ic-step"
          );
          const compactStepTypes = [
            "active",
            "completed",
            "disabled",
            "completed",
          ];
          for (let i = steps.length - 1; i > 0; i--) {
            if (steps[i].stepType === "current") {
              steps[i].stepType = compactStepTypes[i];
              steps[i - 1].stepType = "current";
              i--;
            }
          }
          if (steps[steps.length - 2].stepType === "current") {
            nextBtn.setAttribute("disabled", "false");
          }
          if (steps[0].stepType === "current") {
            backBtn.setAttribute("disabled", "true");
          }
        }}
      >
        Back
      </IcButton>
      <IcButton
        class="next-btn-compact-stepper"
        onClick={() => {
          const backBtn = document.querySelector(".back-btn-compact-stepper");
          const nextBtn = document.querySelector(".next-btn-compact-stepper");
          const steps = document.querySelectorAll(
            "#standard-compact-stepper > ic-step"
          );
          const compactStepTypes = [
            "active",
            "completed",
            "disabled",
            "completed",
          ];
          for (let i = 0; i < steps.length - 1; i++) {
            if (steps[i].stepType === "current") {
              steps[i].stepType = compactStepTypes[i];
              steps[i + 1].stepType = "current";
              i++;
            }
          }
          if (steps[1].stepType === "current") {
            backBtn.setAttribute("disabled", "false");
          }
          if (steps[steps.length - 1].stepType === "current") {
            nextBtn.setAttribute("disabled", "true");
          }
        }}
      >
        Next
      </IcButton>
    </div>
  )

### Full-width stepper

<Canvas>
  <Story of={IcStepperStories.FullWidthStepper} />
</Canvas>

### Left-aligned stepper

<Canvas>
  <Story of={IcStepperStories.LeftAlignedStepper} />
</Canvas>

### With hidden step information

<Canvas>
  <Story of={IcStepperStories.WithHiddenStepInformation} />
</Canvas>

### Without step titles

<Canvas>
  <Story of={IcStepperStories.WithoutStepTitles} />
</Canvas>

### Custom stepper

<Canvas>
  <Story of={IcStepperStories.CustomStepper} />
</Canvas>

### Light

<Canvas>
  <Story of={IcStepperStories.Light} />
</Canvas>

### Custom connector width

<Canvas>
  <Story of={IcStepperStories.CustomConnectorWidth} />
</Canvas>

### Compact stepper

<Canvas>
  <Story of={IcStepperStories.CompactStepper} />
</Canvas>

### Compact stepper light

<Canvas>
  <Story of={IcStepperStories.CompactStepperLight} />
</Canvas>

### Custom compact stepper

<Canvas>
  <Story of={IcStepperStories.CustomCompactStepper} />
</Canvas>

### Playground

<Canvas>
  <Story of={IcStepperStories.Playground} />
</Canvas>
