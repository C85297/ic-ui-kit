import {
  Meta,
  Story,
  Canvas,
  Controls,
  Description,
} from "@storybook/blocks";
import {
  IcButton,
  IcCheckbox,
  IcCheckboxGroup,
  IcDialog,
  IcTextField,
  IcSelect,
  IcAlert,
  IcSearchBar,
  IcChip,
  IcTooltip,
  IcTypography,
} from "../components";
import { SlottedSVG } from "../";
import { useRef, useState } from "react";
import readme from "../../../web-components/src/components/ic-dialog/readme.md";
import * as IcDialogStories from './ic-dialog.stories';

<Meta of={IcDialogStories} />

<Description markdown={readme} />

export const buttonProps = [
  { label: "Close", onclick: "this.hideDialog()" },
  { label: "Options", onclick: "alert('Options...')" },
  { label: "Confirm", onclick: "alert('Confirmed'); this.hideDialog()" },
];

export const options = [
  { label: "Cappuccino", value: "Cap" },
  { label: "Latte", value: "Lat" },
  { label: "Americano", value: "Ame" },
];

### Sizes

export const showSmallDialog = () => {
  const dialog = document.querySelector("#small-dialog");
  dialog.open = true;
};

export const showMediumDialog = () => {
  const dialog = document.querySelector("#medium-dialog");
  dialog.open = true;
};

export const showLargeDialog = () => {
  const dialog = document.querySelector("#large-dialog");
  dialog.open = true;
};

<Canvas>
  <Story of={IcDialogStories.Sizes} />
</Canvas>

### Status

export const showNeutralDialog = () => {
  const dialog = document.querySelector("#neutral-dialog");
  dialog.open = true;
};

export const showInfoDialog = () => {
  const dialog = document.querySelector("#info-dialog");
  dialog.open = true;
};

export const showWarningDialog = () => {
  const dialog = document.querySelector("#warning-dialog");
  dialog.open = true;
};

export const showErrorDialog = () => {
  const dialog = document.querySelector("#error-dialog");
  dialog.open = true;
};

export const showSuccessDialog = () => {
  const dialog = document.querySelector("#success-dialog");
  dialog.open = true;
};

<Canvas>
  <Story of={IcDialogStories.Status} />
</Canvas>

### Buttons

export const showPlainDialog = () => {
  const dialog = document.querySelector("#plain-dialog");
  dialog.open = true;
};

export const showSingleDialog = () => {
  const dialog = document.querySelector("#single-dialog");
  dialog.open = true;
};

export const showDoubleDialog = () => {
  const dialog = document.querySelector("#double-dialog");
  dialog.open = true;
};

export const showTripleDialog = () => {
  const dialog = document.querySelector("#triple-dialog");
  dialog.open = true;
};

export const showDestructiveDialog = () => {
  const dialog = document.querySelector("#destructive-dialog");
  dialog.open = true;
};

<Canvas>
  <Story of={IcDialogStories.Buttons} />
</Canvas>

### Slotted content

export const showDialog = () => {
  const dialog = document.querySelector("ic-dialog");
  dialog.open = true;
};

export const hideDialog = () => {
  const dialog = document.querySelector("ic-dialog");
  dialog.open = false;
};

export const confirm = () => {
  alert("Confirmed!");
  hideDialog();
};

<Canvas>
  <Story of={IcDialogStories.SlottedContent} />
</Canvas>

### Background close prevented

export const showClosePreventedDialog = () => {
  const dialog = document.querySelector("ic-dialog");
  dialog.open = true;
};

<Canvas>
  <Story of={IcDialogStories.BackgroundClosePrevented} />
</Canvas>

### Scrollable

export const showScrollableDialog = () => {
  const dialog = document.querySelector("ic-dialog");
  dialog.open = true;
};

<Canvas>
  <Story of={IcDialogStories.Scrollable} />
</Canvas>

### Popover

export const showSelectDialog = () => {
  const dialog = document.querySelector("#select-dialog");
  dialog.showDialog();
};

export const showSearchBarDialog = () => {
  const dialog = document.querySelector("#search-bar-dialog");
  dialog.showDialog();
};

export const showTooltipDialog = () => {
  const dialog = document.querySelector("#tooltip-dialog");
  dialog.showDialog();
};

export const showLongTextDialog = () => {
  const dialog = document.querySelector("#long-text-select-dialog");
  dialog.showDialog();
};

export const dropdownItems = () => {
  return Array.from(Array(10).keys()).map((i) => {
    return {
      label: "Item " + i,
      value: "item-" + i,
    };
  });
};

<Canvas>
  <Story of={IcDialogStories.Popover} />
</Canvas>

### Show / hide interactive elements

export const showShowHideContentDialog = () => {
  const dialog = document.querySelector("#show-hide-content-dialog");
  dialog.showDialog();
};

export const ShowHideContent = () => {
  const [showEl1, setShowEl1] = useState(false);
  const [showEl2, setShowEl2] = useState(false);
  const handleShow = (show) => {
    // Delay prevents false positive by ensuring the two slot updates happen at separate times
    setTimeout(() => {
      setShowEl1(show);
    }, 2000);
    setShowEl2(show);
  };
  return (
    <>
      <IcTypography>
        Demonstrates changes to slotted elements happening after first load.
        <br />
        The button which is a child of an existing slotted element will update after a 2s delay.
      </IcTypography>
      <br />
      <IcButton onClick={() => handleShow(true)}>Show</IcButton>
      <IcButton onClick={() => handleShow(false)}>Hide</IcButton>
      <div>
        {showEl1 && (
          <IcButton>Child of slotted element</IcButton>
        )}
      </div>
      {showEl2 && (
        <>
          <IcButton>Slotted element</IcButton>
          <IcTypography>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
            eiusmod tempor incididunt ut labore et dolore magna aliqua.
          </IcTypography>
        </>
      )}
    </>
  );
};

<Canvas>
  <Story of={IcDialogStories.ShowHideInteractiveElements} />
</Canvas>

### Hidden close button

export const showHiddenCloseButtonDialog = () => {
  const dialog = document.querySelector("#hidden-close-button-dialog");
  dialog.open = true;
};

<Canvas>
  <Story of={IcDialogStories.ShowHideInteractiveElements} />
</Canvas>

### Auto opening

export const showAutoOpenCloseButtonDialog = () => {
  const dialog = document.querySelector("#auto-opening-dialog");
  dialog.open = true;
};

<Canvas>
  <Story of={IcDialogStories.AutoOpening} />
</Canvas>

### Playground

export const defaultArgs = {
  buttons: true,
  closeOnBackdropClick: true,
  destructive: false,
  dismissLabel: "Dismiss",
  disableHeightConstraint: false,
  disableWidthConstraint: false,
  hideCloseButton: false,
  heading: "This is a dialog",
  label: "Dialog",
  open: true,
  size: "medium",
};

<Canvas>
  <Story of={IcDialogStories.Playground} />
</Canvas>
